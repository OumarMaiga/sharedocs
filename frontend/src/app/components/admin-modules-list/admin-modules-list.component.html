<app-admin-navbar></app-admin-navbar>

<div class="pt-16 min-h-screen bg-gray-100">
  <!-- Sidebar fixe -->
  <app-admin-sidebar class="fixed top-16 left-0 bottom-0 w-64 bg-gray-800 text-white"></app-admin-sidebar>

  <!-- Contenu principal -->
  <div class="ml-64 p-8">
    <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">
      Liste des Modules
    </h2>
    
    <!-- Bouton pour créer un nouveau module -->
    <div class="flex justify-end mb-4">
      <button
        (click)="router.navigate(['/admin/modules/create'])"
        class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded"
      >
        Créer un nouveau module
      </button>
    </div>
    
    <!-- Message d'erreur -->
    <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-100 text-red-700 rounded">
      {{ errorMessage }}
    </div>
    
    <!-- Tableau responsive -->
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white rounded-lg shadow">
        <thead>
          <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
            <th class="py-3 px-6 text-left">ID</th>
            <th class="py-3 px-6 text-left">Titre</th>
            <th class="py-3 px-6 text-left">Description</th>
            <th class="py-3 px-6 text-left">Enseignant</th>
            <th class="py-3 px-6 text-left">Classe</th>
            <th class="py-3 px-6 text-center">Actions</th>
          </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
          <tr *ngFor="let module of displayedModules" class="border-b border-gray-200 hover:bg-gray-100">
            <td class="py-3 px-6 text-left whitespace-nowrap">{{ module.id }}</td>
            <td class="py-3 px-6 text-left">{{ module.titre }}</td>
            <td class="py-3 px-6 text-left">{{ module.description || '-' }}</td>
            <td class="py-3 px-6 text-left">{{ module.enseignant.username }}</td>
            <td class="py-3 px-6 text-left">{{ module.classe.nom }}</td>
            <td class="py-3 px-6 text-center">
              <div class="flex items-center justify-center space-x-2">
                <button (click)="onEdit(module)" class="text-blue-500 hover:text-blue-700">
                  <i class="bi bi-pencil-square text-xl"></i>
                </button>
                <button (click)="onDelete(module)" class="text-red-500 hover:text-red-700">
                  <i class="bi bi-trash-fill text-xl"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-center space-x-4 mt-4">
      <button
        (click)="prevPage()"
        [disabled]="page === 1"
        class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"
      >
        Précédent
      </button>
      <span class="font-medium">
        Page {{ page }} / {{ totalPages }}
      </span>
      <button
        (click)="nextPage()"
        [disabled]="page === totalPages"
        class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"
      >
        Suivant
      </button>
    </div>
  </div>
</div>
